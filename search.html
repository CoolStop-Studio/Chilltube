<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>YouTube Search Example</title>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="https://apis.google.com/js/client.js?onload=googleApiClientReady"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap" rel="stylesheet">


    <script>
      const API_KEY = 'AIzaSyD3sYwQT-Q31roZcky7T_bskNIzGqTwQWM';

      // Load client library
      function init() {
        gapi.load('client', () => {
          gapi.client.setApiKey(API_KEY);
          gapi.client.load('youtube', 'v3', onYouTubeApiLoad);
        });
      }

      // When API is ready
      function onYouTubeApiLoad() {
        searchYouTube('double pendulum simulation');
      }

      function searchYouTube(query) {
        const request = gapi.client.youtube.search.list({
          part: 'snippet',
          q: query,
          type: 'video',
          maxResults: 30
        });

        request.execute(response => {
          const results = response.items;
          $('#results').empty();

          results.forEach(item => {
            const title = item.snippet.title;
            const videoId = item.id.videoId;
            const thumb = item.snippet.thumbnails.default.url;
            $('#results').append(`
              <div>
                <img src="${thumb}" alt="${title}">
                <a href="https://www.youtube.com/watch?v=${videoId}" target="_blank">${title}</a>
              </div>
            `);
          });
        });
      }

      // Make sure gapi is loaded first
      window.onload = function() {
        init();
      };
    </script>
  </head>

  <body>
    <h2>YouTube Search Demo</h2>
    <div id="results">Loading...</div>
  </body>
</html>
